<?phpif(strtolower($_SERVER['REQUEST_METHOD']) === 'post'){  if(isset($_POST['action']))  {    include('class.php');    if($_POST['action'] === 'list_drivers')    {      $response = $class->listDrivers();      if($response['status'] == 'true')      {        echo json_encode($response['content']);      }      else      {        echo 'false';      }    }    else if($_POST['action'] === 'good_rating')    {      $lng='';      $lat='';      if(isset($_POST['lat']) && isset($_POST['lng']) && $_POST['lat'] !='' && $_POST['lng'] !='')      {        $lng=$_POST['lng'];        $lat=$_POST['lat'];      }      $driver = $_POST['driver'];      $score = $_POST['score'];      $response = $class->rate_driver($driver,$score,$lat,$lng);      if($response['status'] == 'true')      {        if(isset($_FILES['image_upload']) && $_FILES['image_upload']['tmp_name'])        {          $uploadDir = '../uploads/';          if(isset($response['content']['id']) && isset($response['content']['registration_plate']))          {            $filename = $uploadDir.$response['content']['id']."_".$response['content']['registration_plate']."_".$_FILES['image_upload']['name'];          }          else          {            $filename = $uploadDir.$driver."_".$_FILES['image_upload']['name'];          }          move_uploaded_file($_FILES['image_upload']['tmp_name'],$filename);        }        echo 'ok';      }      else      {        echo $response['content'];      }    }    else if($_POST['action'] === 'bad_rating')    {      $lng='';      $lat='';      if(isset($_POST['lat']) && isset($_POST['lng']) && $_POST['lat'] !='' && $_POST['lng'] !='')      {        $lng=$_POST['lng'];        $lat=$_POST['lat'];      }      $driver = $_POST['driver'];      $ratingsArray = json_decode($_POST['ratings'],true);      $response = $class->bad_rating($driver,$ratingsArray,$lat,$lng);      if($response['status'] == 'true')      {        if(isset($_FILES['image_upload']))        {          $uploadDir = '../uploads/';          if(isset($response['content']['id']) && isset($response['content']['registration_plate']))          {            $filename = $uploadDir.$response['content']['id']."_".$response['content']['registration_plate']."_".$_FILES['image_upload']['name'];          }          else          {            $filename = $uploadDir.$driver."_".$_FILES['image_upload']['name'];          }          move_uploaded_file($_FILES['image_upload']['tmp_name'],$filename);        }        echo 'ok';      }      else      {        echo $response['content'];      }    }    else if($_POST['action'] === 'create_driver')    {      $driverDetails = $_POST;      if(isset($driverDetails['firstname']) && $driverDetails['firstname'] !=='' && isset($driverDetails['surname']) && $driverDetails['surname'] !=='' &&        isset($driverDetails['registration']) && $driverDetails['registration'] !=='' && isset($driverDetails['assoc']) && $driverDetails['assoc'] !=='')      {        $response = $class->create_driver($driverDetails['firstname'],$driverDetails['surname'],$driverDetails['registration'],$driverDetails['assoc']);        if($response['status'] == 'true')        {//          echo 'true';        }        else        {//          echo 'false';        }      }      header('Location: ../drivers.php');    }    else if($_POST['action']=== 'PayingTithes')    {      $CongregantDetails = $_POST;      if(isset($CongregantDetails['conID']) && $CongregantDetails['conID']!==''          && isset($CongregantDetails['ddMonthly']) && $CongregantDetails['ddMonthly']!==''          && isset($CongregantDetails['ddPaymentPeriod'])&& $CongregantDetails['ddPaymentPeriod']!==''          && isset($CongregantDetails['paid'])&& $CongregantDetails['paid']!=='')      {        $response = $class->TithesPayment($CongregantDetails['conID'],$CongregantDetails['ddMonthly'],$CongregantDetails['ddPaymentPeriod'],$CongregantDetails['paid']);        if($response['status'] == 'true')        {        }        else        {        }      }      header('Location: ../pages/monthly.php');    }    else if($_POST['action'] === 'create_user')    {      $driverDetails = $_POST;      if(isset($driverDetails['firstname']) && $driverDetails['firstname'] !=='' && isset($driverDetails['surname']) && $driverDetails['surname'] !=='' &&        isset($driverDetails['email']) && $driverDetails['email'] !=='')      {        $response = $class->create_user($driverDetails['firstname'],$driverDetails['surname'],$driverDetails['email']);        if($response['status'] == 'true')        {//          echo 'true';        }        else        {//          echo 'false';        }      }      header('Location: ../users.php');    }    else if($_POST['action'] === 'registerCommuter')    {      $CongregantDetails = $_POST;      if(isset($CongregantDetails['txtFirstName']) && $CongregantDetails['txtFirstName']!=='' && isset($CongregantDetails['txtSurname'])&& $CongregantDetails['txtSurname']!=='' && isset($CongregantDetails['ddAssembly'])&& $CongregantDetails['ddAssembly']!=='')      {        $response = $class->RegisterCongregant($CongregantDetails['txtFirstName'], $CongregantDetails['txtSurname'], $CongregantDetails['ddAssembly']);        if($response['status'] == 'true')        {//          echo "<div class='alert alert-success'>Thanks for completing registration with us, you are now on our database.</div>";        }        else        {//          echo 'false';        }      }      header('Location: ..pages/admin.php');    }    else    {      echo 'supply a valid action name';    }  }  else  {    echo "No action value supplied";  }}else{  echo 'only posts';}